<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta name="pinterest" content="nopin">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<meta name="generator" content="Hugo 0.87.0" />



<link rel="canonical" href="https://davidejones.github.io/hugo-hn/2021/08/19/pack-it-in-mathematicians-someone-owes-llvm-a-million-bucks/">


    <title>“Pack it in, mathematicians, someone owes LLVM a million bucks” - Hugo Hacker News</title>
    
<meta name="description" content="">

<meta property="og:title" content="“Pack it in, mathematicians, someone owes LLVM a million bucks” - Hugo Hacker News">
<meta property="og:type" content="article">
<meta property="og:url" content="https://davidejones.github.io/hugo-hn/2021/08/19/pack-it-in-mathematicians-someone-owes-llvm-a-million-bucks/">
<meta property="og:image" content="https://davidejones.github.io/hugo-hn/images/default.png">
<meta property="og:site_name" content="Hugo Hacker News">
<meta property="og:description" content="">
<meta property="og:locale" content="ja_JP">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="Hugo Hacker News">
<meta name="twitter:url" content="https://davidejones.github.io/hugo-hn/2021/08/19/pack-it-in-mathematicians-someone-owes-llvm-a-million-bucks/">
<meta name="twitter:title" content="“Pack it in, mathematicians, someone owes LLVM a million bucks” - Hugo Hacker News">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://davidejones.github.io/hugo-hn/images/default.png">


<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "NewsArticle",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id":"https:\/\/davidejones.github.io\/hugo-hn\/"
    },
    "headline": "“Pack it in, mathematicians, someone owes LLVM a million bucks” - Hugo Hacker News",
    "image": {
      "@type": "ImageObject",
      "url": "https:\/\/davidejones.github.io\/hugo-hn\/images\/default.png",
      "height": 800,
      "width": 800
    },
    "datePublished": "2021-08-19T13:20:09JST",
    "dateModified": "2021-08-19T13:20:09JST",
    "author": {
      "@type": "Person",
      "name": "Hugo Hacker News"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Hugo Hacker News",
      "logo": {
        "@type": "ImageObject",
        "url": "https:\/\/davidejones.github.io\/hugo-hn\/images/logo.png",
        "width": 600,
        "height": 60
      }
    },
    "description": ""
  }
</script>



    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

    
    
    
    
        
    
    
    <link href="https://davidejones.github.io/hugo-hn/style.min.130df59cea3bafd8a515eeb4a51c215616cb41f2a9520765b9f1574d3cfedf2c485abb4a8d785adcd7acdc2400797ba6abffe5b0bb4612cb79bc0b884aac89e8.css" rel="stylesheet" />
</head>
<body class="post">
    <header>
        <a href="https://davidejones.github.io/hugo-hn/">Hugo Hacker News</a>
        <nav>
            <ul>
                
                    <li><a href="/hugo-hn/">new</a></li>
                
                    <li><a href="/hugo-hn/comments/">comments</a></li>
                
                    <li><a href="/hugo-hn/categories/show/">show</a></li>
                
                    <li><a href="/hugo-hn/categories/ask/">ask</a></li>
                
                    <li><a href="/hugo-hn/categories/jobs/">jobs</a></li>
                
                    <li><a href="https://news.ycombinator.com/submit">submit</a></li>
                
            </ul>
        </nav>
        <select onchange="myChangeHandler(this)">
            
                <option value="/hugo-hn/">new</option>
            
                <option value="/hugo-hn/comments/">comments</option>
            
                <option value="/hugo-hn/categories/show/">show</option>
            
                <option value="/hugo-hn/categories/ask/">ask</option>
            
                <option value="/hugo-hn/categories/jobs/">jobs</option>
            
                <option value="https://news.ycombinator.com/submit">submit</option>
            
        </select>
    </header>
    <main>
        
<article>
    <header>
        <h1><a href="https://twitter.com/jckarter/status/1428093469755527168">“Pack it in, mathematicians, someone owes LLVM a million bucks”</a></h1>
        
    </header>
    
        
            


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=ColinWright" target="_blank">ColinWright</a>   <span class="timeago" data-date="2021-08-19 13:43:44 &#43;0000 UTC">2021-08-19 13:43:44 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            (a) The test is the wrong way round for the Collatz Conjecture;<p>(b) The Collatz Conjecture isn&#x27;t one of the Millennium problems;<p>(c) It&#x27;s using bounded numbers in the range where the Collatz Conjecture is known to be true;<p>(d) It seems reasonable to say &quot;If this routine exits then the value will be &quot;true&quot;;<p>(e) None of what I say here is deep or new, so when people get excited about this sort of thing it makes me wonder what I&#x27;ve missed.<p>So ... what have I missed?
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=stephencanon" target="_blank">stephencanon</a>   <span class="timeago" data-date="2021-08-19 14:01:13 &#43;0000 UTC">2021-08-19 14:01:13 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            (a) part of the joke
(b) the Millennium problems are not the only million-dollar prizes in mathematics
(c) part of the joke
(d) part of the joke (and part of the C++ standard)
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=ColinWright" target="_blank">ColinWright</a>   <span class="timeago" data-date="2021-08-19 14:30:27 &#43;0000 UTC">2021-08-19 14:30:27 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            (b) There are other prizes, but I&#x27;m not aware of any others worth a million dollars.  Do you have any pointers?  A quick interwebs search didn&#x27;t turn up anything, but they might just be being swamped by the results with the Millennium Problems.
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=tpush" target="_blank">tpush</a>   <span class="timeago" data-date="2021-08-19 14:40:06 &#43;0000 UTC">2021-08-19 14:40:06 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            &gt; A quick interwebs search didn&#x27;t turn up anything [...]<p>Searching &#x27;collatz conjecture prize&#x27; quite literally puts a prize of a bout 120MM Yen (~ $1MM) as the top result.
        </div>
        <div class="children">
            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=ColinWright" target="_blank">ColinWright</a>   <span class="timeago" data-date="2021-08-19 14:57:58 &#43;0000 UTC">2021-08-19 14:57:58 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Hah!  I didn&#x27;t search specifically for that, I was searching for bounties in general.<p>Thanks.
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=ithinkso" target="_blank">ithinkso</a>   <span class="timeago" data-date="2021-08-19 15:04:51 &#43;0000 UTC">2021-08-19 15:04:51 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            There is also a Beal Conjecture[0] worth a million<p>[0] <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Beal_conjecture" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Beal_conjecture</a>
        </div>
        <div class="children">
            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=ColinWright" target="_blank">ColinWright</a>   <span class="timeago" data-date="2021-08-19 15:08:14 &#43;0000 UTC">2021-08-19 15:08:14 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            My initial search for bounties didn&#x27;t turn up that one, either.  I wonder if my connection(s) with Erdos have polluted my search history, so it was showing me mostly those, and not showing me this.<p>&lt;shrug&gt;<p>Thanks for finding this and letting me know, I&#x27;ve learned something.
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=lostcolony" target="_blank">lostcolony</a>   <span class="timeago" data-date="2021-08-19 13:45:26 &#43;0000 UTC">2021-08-19 13:45:26 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            The joke.
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=cabaalis" target="_blank">cabaalis</a>   <span class="timeago" data-date="2021-08-19 14:05:53 &#43;0000 UTC">2021-08-19 14:05:53 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            I&#x27;ve only seen Veretasium YouTube video on this a few days ago, and I&#x27;m not a mathematician. Is the joke that LLVM has solved the mystery by optimizing out what it decided is an infinite loop?
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=WJW" target="_blank">WJW</a>   <span class="timeago" data-date="2021-08-19 14:17:45 &#43;0000 UTC">2021-08-19 14:17:45 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            LLVM optimizes out the infinite loop, because the C++ standard defines that all programs must be able to make forward progress and so removing this loop does not alter the result of the program. Thus, collatz() as written in the tweet will always return true when optimized by LLVM. This says nothing about the conjecture being true or not, it is solely an artifact of the C++ standard being written a certain way.<p>But also a layer deeper, collatz() takes a uint128 as input and the Collatz conjecture has already been proven to be true for all numbers that would fit into a uint128. So LLVM arrives to the correct answer (`return true`) because of the wrong reason, mathematically speaking.
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=ludocode" target="_blank">ludocode</a>   <span class="timeago" data-date="2021-08-19 15:13:17 &#43;0000 UTC">2021-08-19 15:13:17 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            This doesn&#x27;t exactly follow the Collatz conjecture because multiplication by 3 will be truncated to a 128-bit unsigned int. It is possible that this truncation causes a loop. Even though the Collatz conjecture has been tested for all numbers in this range, it has probably not been tested with this overflow effect.
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=plasticchris" target="_blank">plasticchris</a>   <span class="timeago" data-date="2021-08-19 15:33:16 &#43;0000 UTC">2021-08-19 15:33:16 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            The overflow shouldn&#x27;t change anything - it&#x27;s still just a number in the range that&#x27;s been checked already.
        </div>
        <div class="children">
            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=WJW" target="_blank">WJW</a>   <span class="timeago" data-date="2021-08-19 15:40:46 &#43;0000 UTC">2021-08-19 15:40:46 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Not so, since the fact that it is in the range does not mean it will steadily go downwards. It might have numbers much bigger than the maximum value for a uint128 somewhere in its Collatz sequence and it is possible (though unlikely) that one of those numbers modulo the maximum value for a uint128 is the original number again. (That is, the modulo operation might introduce loops that are not present in the normal Collatz sequence because mathematical integers don&#x27;t overflow)
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=Thiez" target="_blank">Thiez</a>   <span class="timeago" data-date="2021-08-19 14:17:44 &#43;0000 UTC">2021-08-19 14:17:44 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            The C++ standard allows compilers to assume that loops terminate. Since there is only one way to exit the loop (`return true;`) the compiler can assume that this line will eventually be reached. Since the rest of the loop has no side effects, the compiler can optimize it out.<p>So the compiler doesn&#x27;t actually need to figure out if the loop is infinite or not.
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=Denvercoder9" target="_blank">Denvercoder9</a>   <span class="timeago" data-date="2021-08-19 14:59:24 &#43;0000 UTC">2021-08-19 14:59:24 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            <i>&gt; The C++ standard allows compilers to assume that loops terminate.</i><p>Technically, it doesn&#x27;t, but it requires programs to make forward progress, which is defined as either terminating, calling I&#x2F;O functions, accessing a volatile variable or performing an atomic or synchronization operation. Infinite loops that&#x27;ll eventually do one of these are perfectly valid C++ and don&#x27;t have to terminate.
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=HelloNurse" target="_blank">HelloNurse</a>   <span class="timeago" data-date="2021-08-19 15:31:40 &#43;0000 UTC">2021-08-19 15:31:40 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            It optimizes &quot;waste an unpredictable time doing arithmetic without side effects, then return 1&quot; to &quot;return 1 without looking at the input&quot;. The relation between that machine arithmetic and the Collatz conjecture is irrelevant.
        </div>
        <div class="children">
            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=Denvercoder9" target="_blank">Denvercoder9</a>   <span class="timeago" data-date="2021-08-19 15:57:24 &#43;0000 UTC">2021-08-19 15:57:24 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            I don&#x27;t think you&#x27;re responding to the right comment?
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=junon" target="_blank">junon</a>   <span class="timeago" data-date="2021-08-19 14:09:45 &#43;0000 UTC">2021-08-19 14:09:45 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Yes.
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=cies" target="_blank">cies</a>   <span class="timeago" data-date="2021-08-19 14:05:45 &#43;0000 UTC">2021-08-19 14:05:45 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Savage. I dont often laugh loud reading HN. Today I did. Thanks.
        </div>
        <div class="children">
            
        </div>
    </div>


            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=ColinWright" target="_blank">ColinWright</a>   <span class="timeago" data-date="2021-08-19 14:25:50 &#43;0000 UTC">2021-08-19 14:25:50 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Ah ... I see my point(s) sailing over your head.  I&#x27;m guessing you didn&#x27;t realise that since the joke is presenting this as if it (i.e. &quot;solving&quot; the Collatz Conjecture) were real, I&#x27;m replying by treating it as if it were real, and thereby playing along with the joke.<p>Never mind, on-line forums are really the right place for subtlety.
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=lostcolony" target="_blank">lostcolony</a>   <span class="timeago" data-date="2021-08-19 14:47:20 &#43;0000 UTC">2021-08-19 14:47:20 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Oh, I understand your points. But I see the joke sailed right over your head; I&#x27;m guessing you didn&#x27;t realize that this joke is presented as a joke, notably due to the phrase &quot;pack it in mathematicians&quot;, since it&#x27;s quite unreasonable to believe that anyone familiar with the Collatz Conjecture would believe that solving it is the only reason for mathematicians to exist (and also quite unreasonable for anyone familiar enough with LLVM and mathematics to assume a compiler&#x27;s behavior constitutes a mathematical proof).<p>I can&#x27;t speak to online forums (I use them for so many things), but I&#x27;m sure Twitter is the right place for humor, and not the right place to announce a serious belief you&#x27;ve proved a long standing mathematical problem.
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=ColinWright" target="_blank">ColinWright</a>   <span class="timeago" data-date="2021-08-19 15:03:05 &#43;0000 UTC">2021-08-19 15:03:05 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            &gt; &quot;Oh, I understand your points. But I see the joke sailed right over your head ...&quot;<p>OK, I guess my sense of humour hasn&#x27;t translated into your context.  Clearly my comment makes you think I didn&#x27;t get the joke, but I did.<p>&gt; &quot;I&#x27;m guessing you didn&#x27;t realize that this joke is presented as a joke, ...&quot;<p>Oh, I did.  Really, I did.<p>I guess we&#x27;re just talking past each other.  &lt;shrug&gt;   You didn&#x27;t get my joke, probably because you think I didn&#x27;t get the original.<p>Time to give up.
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=lostcolony" target="_blank">lostcolony</a>   <span class="timeago" data-date="2021-08-19 15:10:34 &#43;0000 UTC">2021-08-19 15:10:34 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Okay. I&#x27;m not sure dissecting the technical inaccuracies of a joke (&quot;but an imam would never walk into a bar!&quot;) is itself a joke (and I&#x27;m pretty sure you edited the comment just above to agree it was a joke, but maybe I just didn&#x27;t read it closely enough), especially when you&#x27;d give the exact same response if you didn&#x27;t know it was a joke, but did know it was technically incorrect, but fair enough.
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=ColinWright" target="_blank">ColinWright</a>   <span class="timeago" data-date="2021-08-19 15:19:26 &#43;0000 UTC">2021-08-19 15:19:26 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            I didn&#x27;t edit any comments, though I can appreciate that a quick skim might leave you with a different impression, and returning might lead you to believe I must have edited it.  But I didn&#x27;t.<p>I really do think we&#x27;ve just been talking past each other.  When something is as obviously &quot;tongue-in-cheek&quot; as the original post, I find it funny when people (a) get the joke, then (b) play it with a completely straight bat.  It appears that doesn&#x27;t cross cultural boundaries in the way I thought it would.<p>You&#x27;re not alone ... some of my comments are getting significant numbers of downvotes.<p>&lt;shrug&gt; ... &quot;Humour&quot;.<p>I&#x27;ll go back to appearing humourless and commenting purely technically on purely technical things.  Meanwhile ... nice to connect with you ... thanks for the responses.
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=lostcolony" target="_blank">lostcolony</a>   <span class="timeago" data-date="2021-08-19 15:29:17 &#43;0000 UTC">2021-08-19 15:29:17 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Fair enough. I&#x27;ll say, it helps to indicate you&#x27;re not being serious in that situation; that&#x27;s hard in text, but something like a &quot;well akshually&quot; (as a deprecating reference to <a href="https:&#x2F;&#x2F;knowyourmeme.com&#x2F;memes&#x2F;ackchyually-actually-guy" rel="nofollow">https:&#x2F;&#x2F;knowyourmeme.com&#x2F;memes&#x2F;ackchyually-actually-guy</a>) preceding it would help.
        </div>
        <div class="children">
            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=ColinWright" target="_blank">ColinWright</a>   <span class="timeago" data-date="2021-08-19 16:07:48 &#43;0000 UTC">2021-08-19 16:07:48 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            That&#x27;s all true, but putting &quot;humour warnings&quot; kinds defeats the purpose, and converts what would be dry humour into something more akin to slapstick, a bit like that person we all know who always insists on going &quot;Bah-doom, Tsh!&quot; on every mildly funny aside.  When someone else highlights things that that I no longer find them funny at all, so I&#x27;d be reluctant to do it.<p>I appreciate the feedback ... I think the best thing for me is just not to try again, and to be explicit when I know something is a joke, and clear that I&#x27;m adding factual information.<p>Watching people continue to downvote the comments I&#x27;ve made, HN is clearly the wrong place for me to do otherwise.
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=alisonkisk" target="_blank">alisonkisk</a>   <span class="timeago" data-date="2021-08-19 16:12:22 &#43;0000 UTC">2021-08-19 16:12:22 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            When people intentionally miscommunicate (even in jest), misunderstanding is a foreseeable side effect.
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=rtkwe" target="_blank">rtkwe</a>   <span class="timeago" data-date="2021-08-19 14:30:24 &#43;0000 UTC">2021-08-19 14:30:24 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            &gt; (b) The Collatz Conjecture isn&#x27;t one of the Millennium problems;<p>It&#x27;s not but there are more bounties out there than just the Millenium list. For the Collatz Conjecture specifically there&#x27;s a 120M Japanese Yen prize which at this moment is a bit more than 1 million USD.<p><a href="https:&#x2F;&#x2F;www.prnewswire.com&#x2F;news-releases&#x2F;bakuage-offers-prize-of-120-million-jpy-to-whoever-solves-collatz-conjecture-math-problem-unsolved-for-84-years-301326629.html" rel="nofollow">https:&#x2F;&#x2F;www.prnewswire.com&#x2F;news-releases&#x2F;bakuage-offers-priz...</a>
        </div>
        <div class="children">
            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=ColinWright" target="_blank">ColinWright</a>   <span class="timeago" data-date="2021-08-19 15:05:52 &#43;0000 UTC">2021-08-19 15:05:52 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            (Also commented elsewhere) ... I didn&#x27;t search specifically for that, I was searching for bounties in general.<p>Thanks.
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=gameswithgo" target="_blank">gameswithgo</a>   <span class="timeago" data-date="2021-08-19 14:38:46 &#43;0000 UTC">2021-08-19 14:38:46 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            You have no sense of humor or curiosity about compiler optimization details that led to this, I guess.<p>For instance not all languages that target LLVM will get this result. That is interesting.
        </div>
        <div class="children">
            
        </div>
    </div>


            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=tantalor" target="_blank">tantalor</a>   <span class="timeago" data-date="2021-08-19 13:48:23 &#43;0000 UTC">2021-08-19 13:48:23 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            &gt; The test is the wrong way round<p>Specifically, Collatz says &quot;if x is even then x &#x2F;= 2&quot; but the code checks &quot;x is odd&quot;.
        </div>
        <div class="children">
            
        </div>
    </div>


            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=yissp" target="_blank">yissp</a>   <span class="timeago" data-date="2021-08-19 15:02:43 &#43;0000 UTC">2021-08-19 15:02:43 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            &gt; (c) It&#x27;s using bounded numbers in the range where the Collatz Conjecture is known to be true;<p>The input is an unsigned __int128, and I believe Collatz has only been verified up to 2^68.
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


        
            


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=hevalon" target="_blank">hevalon</a>   <span class="timeago" data-date="2021-08-19 13:44:34 &#43;0000 UTC">2021-08-19 13:44:34 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            For anyone that wants to have some background context on the problem statement (3x+1), Veritasium has made a great explanation [1].<p>[1] <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=094y1Z2wpJg" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=094y1Z2wpJg</a>
        </div>
        <div class="children">
            
        </div>
    </div>


        
            


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=muldvarp" target="_blank">muldvarp</a>   <span class="timeago" data-date="2021-08-19 13:40:08 &#43;0000 UTC">2021-08-19 13:40:08 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Well, first of all, Collatz isn&#x27;t one of the millenium problems.<p>Secondly, as others have already explained, endless loops are UB and optimized away, but, thirdly, even if they weren&#x27;t, C++ integers are more like Z&#x2F;nZ than Z and checking if Collatz holds in Z&#x2F;nZ is rather trivial.
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=stephencanon" target="_blank">stephencanon</a>   <span class="timeago" data-date="2021-08-19 13:55:27 &#43;0000 UTC">2021-08-19 13:55:27 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            &gt; C++ integers are more like Z&#x2F;nZ<p>This is an widely-held misconception, but C++ signed integers are _nothing_ like Z&#x2F;nZ. Unsigned integers are (except for division), and machine arithmetic often is, but in the C++ abstract machine, signed overflow is undefined behavior.
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=vlovich123" target="_blank">vlovich123</a>   <span class="timeago" data-date="2021-08-19 13:59:52 &#43;0000 UTC">2021-08-19 13:59:52 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            The snippet on Twitter uses unsigned.
        </div>
        <div class="children">
            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=stephencanon" target="_blank">stephencanon</a>   <span class="timeago" data-date="2021-08-19 14:01:53 &#43;0000 UTC">2021-08-19 14:01:53 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Yes, it does.
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=jasode" target="_blank">jasode</a>   <span class="timeago" data-date="2021-08-19 14:19:36 &#43;0000 UTC">2021-08-19 14:19:36 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            <i>&gt;, endless loops are UB and optimized away</i><p>That soundbite also repeats&#x2F;paraphrases what thread author Joe Groff said <i>&quot;LLVM considers infinite recursion to be UB,&quot;</i><p>But... the key is infinite loops <i>without side effects</i> can be optimized away.  Endless loops even without a provable termination (The Halting Problem) are not UB.<p>But in this case, the value <i>&#x27;x&#x27;</i> has a side effect of determining what bool of true&#x2F;false value to return.  That while() loop does not look like it&#x27;s free of side effects.
        </div>
        <div class="children">
            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=agent327" target="_blank">agent327</a>   <span class="timeago" data-date="2021-08-19 14:50:48 &#43;0000 UTC">2021-08-19 14:50:48 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            There is no side effect. The loop only interacts with variable &#x27;x&#x27;, which is discarded after the function ends. Since it is not observed, there is no side effect.<p>That leaves only the loop itself, which can run infinitely long (which would be UB, and the compiler is free to assume that won&#x27;t happen), or it won&#x27;t, in which case it will always return true. Thus, like them or not, the rules of C++ allow this particular outcome.<p>I can&#x27;t say I like this kind of optimisation. Sure, you can construct neat circus tricks with it like this, but other than that it seems pretty pointless for real-world software, and something that could easily turn a simple mistake into a debugging disaster.
        </div>
        <div class="children">
            
        </div>
    </div>


            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=gpderetta" target="_blank">gpderetta</a>   <span class="timeago" data-date="2021-08-19 16:19:18 &#43;0000 UTC">2021-08-19 16:19:18 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            &quot;Side-effect&quot; is a Word of Power that includes IO, volatile, atomics, and little else.
        </div>
        <div class="children">
            
        </div>
    </div>


            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=bidirectional" target="_blank">bidirectional</a>   <span class="timeago" data-date="2021-08-19 14:24:41 &#43;0000 UTC">2021-08-19 14:24:41 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            The only return statement returns a hardcoded true.
        </div>
        <div class="children">
            
        </div>
    </div>


            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=Denvercoder9" target="_blank">Denvercoder9</a>   <span class="timeago" data-date="2021-08-19 15:01:03 &#43;0000 UTC">2021-08-19 15:01:03 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            For the purposes of the C++ standard, looping forever is not a side-effect. Only I&#x2F;O calls, volatile accesses and atomic&#x2F;synchronization operations are.
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


        
            


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=detaro" target="_blank">detaro</a>   <span class="timeago" data-date="2021-08-19 13:30:47 &#43;0000 UTC">2021-08-19 13:30:47 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Would be news to me that mathematicians consider maths to work like C++ language semantics. (endless loops that don&#x27;t &quot;make progress&quot; are UB, so it can optimize them away)
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=AnIdiotOnTheNet" target="_blank">AnIdiotOnTheNet</a>   <span class="timeago" data-date="2021-08-19 13:34:32 &#43;0000 UTC">2021-08-19 13:34:32 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            That sounds like a really great way to create bugs and hide the cause from the programmer. Why does anyone think this is a good idea? I&#x27;m not asking rhetorically, clearly people do think this is a good idea, I just can&#x27;t fathom why.
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=tsimionescu" target="_blank">tsimionescu</a>   <span class="timeago" data-date="2021-08-19 14:08:34 &#43;0000 UTC">2021-08-19 14:08:34 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            This allows compilers to optimize by reordering code before&#x2F;after a loop. Without this, the compiler would only be allowed to move code around the loop if it could prove the loop terminates. By contrast, with this UB, the compiler is allowed to do this move if the loop is not doing IO or accessing volatile memory locations.<p>I&#x27;d also note that this particular footgun only exists in C++, the C standard allows loops that never terminate and never do IO or volatile memory access.
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=rrss" target="_blank">rrss</a>   <span class="timeago" data-date="2021-08-19 14:30:19 &#43;0000 UTC">2021-08-19 14:30:19 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            I think C11 and later have similar forward progress requirements as C++11 and later, C just has an additional exception for loops with constant conditions.
        </div>
        <div class="children">
            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=foxfluff" target="_blank">foxfluff</a>   <span class="timeago" data-date="2021-08-19 14:48:56 &#43;0000 UTC">2021-08-19 14:48:56 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            N1570 &quot;An iteration statement whose controlling expression is not a constant expression, that performs no input&#x2F;output operations, does not access volatile objects, and performs no synchronization or atomic operations in its body, controlling expression, or (in the case of a for statement) its expression-3, may be assumed by the implementation to terminate.&quot;<p>Doesn&#x27;t seem like UB but optimizing effectless loops out is permitted.
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=AnIdiotOnTheNet" target="_blank">AnIdiotOnTheNet</a>   <span class="timeago" data-date="2021-08-19 14:21:26 &#43;0000 UTC">2021-08-19 14:21:26 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            I mean sure, if I let the compiler do whatever it wants to my code in order to make it faster it&#x27;ll make it faster, but then it probably won&#x27;t do what I want it to do. I don&#x27;t understand why that&#x27;s acceptable.
        </div>
        <div class="children">
            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=floxy" target="_blank">floxy</a>   <span class="timeago" data-date="2021-08-19 16:14:49 &#43;0000 UTC">2021-08-19 16:14:49 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Sounds like you might be interested in Friendly C:<p><a href="https:&#x2F;&#x2F;blog.regehr.org&#x2F;archives&#x2F;1180" rel="nofollow">https:&#x2F;&#x2F;blog.regehr.org&#x2F;archives&#x2F;1180</a>
        </div>
        <div class="children">
            
        </div>
    </div>


            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=Thiez" target="_blank">Thiez</a>   <span class="timeago" data-date="2021-08-19 14:46:11 &#43;0000 UTC">2021-08-19 14:46:11 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Ostensibly as a programmer you know the semantics of your programming language, so the compiler isn&#x27;t doing anything unexpected here ;) So from its perspective it is not doing anything unexpected to your code.<p>I think the real problem here is that people underestimate the complexity of C and C++. It often <i>feels</i> like it would be easy to guess what the assembly would look like for some snippet of C&#x2F;C++ code (especially when it&#x27;s not using any C++ features, such as the loop in the article) when we really should be thinking in terms of the abstract machine that the standard defines.
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=AnIdiotOnTheNet" target="_blank">AnIdiotOnTheNet</a>   <span class="timeago" data-date="2021-08-19 15:03:02 &#43;0000 UTC">2021-08-19 15:03:02 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            &gt; Ostensibly as a programmer you know the semantics of your programming language, so the compiler isn&#x27;t doing anything unexpected here ;) So from its perspective it is not doing anything unexpected to your code.<p>I just don&#x27;t think having &#x27;gotcha&#x27; rules the compiler exploits to do whatever it wants regardless of programmer intent is a good idea, and that&#x27;s how C&#x2F;C++ treats UB. UB should be a compiler error and force the programmer to specify what they want the result to actually be so there are no assumptions on the programmer end and no surprises from the compiler.
        </div>
        <div class="children">
            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=Thiez" target="_blank">Thiez</a>   <span class="timeago" data-date="2021-08-19 15:19:47 &#43;0000 UTC">2021-08-19 15:19:47 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Note that the optimization discussed in the article does not actually involve UB.<p>&gt; UB should be a compiler error and force the programmer to specify what they want the result to actually be so there are no assumptions on the programmer end and no surprises from the compiler.<p>Many types of UB are not easily detected at compile time, or cannot be detected in advance at all. For instance, prompting the user for an integer and incrementing it by 1 is UB when the user enters the maximum value of an integer. So should the compiler forbid adding two numbers unless you explicitly guard against overflow? Perhaps it should, but the resulting language definitely wouldn&#x27;t look anything like C.<p>Besides, it&#x27;s not that the compiler is going out of its way to screw you over with a &#x27;gotcha&#x27; rule, it&#x27;s just optimizing using the assumption that your program is free of UB. As a programmer it is your responsibility that there is no UB. If you feel there are too many pitfalls you could use a different programming language, lobby the standards organization for a standard that has less UB, or use compiler options to detect it (e.g. ubsan for clang).
        </div>
        <div class="children">
            
        </div>
    </div>


            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=Denvercoder9" target="_blank">Denvercoder9</a>   <span class="timeago" data-date="2021-08-19 15:10:39 &#43;0000 UTC">2021-08-19 15:10:39 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            This happens because (paraphrased) the standard dictates that loops without side-effects eventually terminate, and all other programs have undefined behaviour. You can&#x27;t turn hitting that undefined behaviour into a compiler error, as distinguishing between the two requires solving the halting problem. You can remove the whole assumption, but that limits the optimization capabilities of the compiler. That gives a trade-off: do we want actual infinite loops, or do we want better optimizations? The second seems more useful to me, even though it might sometimes give surprising behaviour for the programmer.
        </div>
        <div class="children">
            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=AnIdiotOnTheNet" target="_blank">AnIdiotOnTheNet</a>   <span class="timeago" data-date="2021-08-19 16:06:28 &#43;0000 UTC">2021-08-19 16:06:28 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            &gt; You can&#x27;t turn hitting that undefined behaviour into a compiler error, as distinguishing between the two requires solving the halting problem.<p>That&#x27;s a fair point, but it still feels wrong to me that the compiler can throw away large chunks of code and change the outcome of the function silently.
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=foxfluff" target="_blank">foxfluff</a>   <span class="timeago" data-date="2021-08-19 14:39:16 &#43;0000 UTC">2021-08-19 14:39:16 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            A lot of people want programs to be optimized instead of naively executing everything as it appears in the source code.  Do you think that&#x27;s acceptable?<p>I think it&#x27;s easier to define in a standard what&#x27;s conforming behavior than it is to exactly and precisely define all the possible optimizations a compiler may (or may not) perform.  So &quot;undefined behavior&quot; is a decent starting point.  Exceptions can be added later, but if you try to spec all allowed optimizations in advance, the spec is going to be massive and also a massive burden.
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=AnIdiotOnTheNet" target="_blank">AnIdiotOnTheNet</a>   <span class="timeago" data-date="2021-08-19 14:55:57 &#43;0000 UTC">2021-08-19 14:55:57 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            &gt; A lot of people want programs to be optimized instead of naively executing everything as it appears in the source code. Do you think that&#x27;s acceptable?<p>Yeah, my problem isn&#x27;t that optimization is changing the code per-se, it&#x27;s that it is introducing a non-obvious bug by doing so. Ostensibly that loop either returns true or never returns. What if it were provided a number that would never return (assume this is possible given the algorithm provided), but because of the &quot;optimization&quot; now returns true? It literally gives us the wrong answer.
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=foxfluff" target="_blank">foxfluff</a>   <span class="timeago" data-date="2021-08-19 15:44:51 &#43;0000 UTC">2021-08-19 15:44:51 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            I believe it to be the case that <i>any</i> optimization in conjunction with a non-conforming program can lead to a subtle or hard-to-understand bug, including giving literally the wrong answer.  So what is the solution?  Disallow optimization, or go to hellish lengths to write a hard-to-follow spec that only permits optimizations that do not surprise people?<p>On the other hand, it is not hard for me to incorporate into my mental model of a language that a program should eventually &quot;do something&quot; and if it doesn&#x27;t, it is literally a wrong program.<p>In fact, that&#x27;s exactly what I thought when I saw the code in question.  Before even realizing what it is about: I read it like a normal program, I saw that it can only ever return true, therefore that code can do only one thing, and all that fluff in there does not impact the end result.  So I don&#x27;t think it&#x27;s particularly non-obvious, but it does require something from the reader.  I&#x27;m ok with that, there&#x27;s a lot in C and C++ you can&#x27;t just assume.<p>I call this a &quot;weird program.&quot;  It&#x27;s trying to brute-force an answer out of the computer, but it&#x27;s the kind of an answer that may or may not ever come.  Hardly unlike a program that tries to answer the halting problem.  Not necessarily an illegitimate program (bruteforcing is a legitimate way to find answers), but not the kind of thing you&#x27;d put inside a normal application.  So I&#x27;m not concerned about normal applications running into this issue much.  If a normal application could go into an infinite do-nothing loop, that is almost definitely a bug -- a literally wrong program.  The optimization here only changes how that wrongness manifests, which is expected for UB &amp; optimizations.<p>I do like that C gives you the escape hatch of using a constant controlling expression if you really want a true &quot;potentially-infinite&quot; loop.
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=AnIdiotOnTheNet" target="_blank">AnIdiotOnTheNet</a>   <span class="timeago" data-date="2021-08-19 15:59:27 &#43;0000 UTC">2021-08-19 15:59:27 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            &gt; On the other hand, it is not hard for me to incorporate into my mental model of a language that a program should eventually &quot;do something&quot; and if it doesn&#x27;t, it is literally a wrong program.<p>Consider this hypothetical: the loop is only potentially infinite because it is written incorrectly. In testing, I would notice an infinite loop and debugging where that is happening is pretty trivial. When the compiler optimizes that away to just always return true, it has made the source of the bug much more difficult to pin down because the code I asked the compiler to make produces a completely different result than what the compiler compiled.
        </div>
        <div class="children">
            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=foxfluff" target="_blank">foxfluff</a>   <span class="timeago" data-date="2021-08-19 16:05:38 &#43;0000 UTC">2021-08-19 16:05:38 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            I know.  I&#x27;ve used C for two decades, I write it professionally today.<p>Some bugs end up being extremely difficult to debug.  I accept that as a fact of life; in exchange, we get pretty decent performance.<p>Guess what I do when there&#x27;s a bug I have a hard time pinning down?  Recompile with optimizations turned off.<p>By the way, I don&#x27;t think I have <i>ever</i> witnessed a bug caused by an accidentally-infinite loop getting optimized out.  So making that almost-never-happens situation easier to fix is not worth trading any optimizations for, imo.  I&#x27;d rather just get a warning from compiler&#x2F;static analyzer (if the code isn&#x27;t the way it is due to macro expansion).
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=tsimionescu" target="_blank">tsimionescu</a>   <span class="timeago" data-date="2021-08-19 15:05:06 &#43;0000 UTC">2021-08-19 15:05:06 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Well, in this particular case, there are two possible options: the loop either terminates, or your program will forever more do nothing observable other than producing heat. In the first case the compiler is right, in the second case your program was not doing anything possibly useful anyway. So, what&#x27;s the actual harm?
        </div>
        <div class="children">
            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=AnIdiotOnTheNet" target="_blank">AnIdiotOnTheNet</a>   <span class="timeago" data-date="2021-08-19 16:00:54 &#43;0000 UTC">2021-08-19 16:00:54 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            If the loop infinitely looping was a bug caused by not writing the function correctly, that bug is now a lot harder to find.
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=alisonkisk" target="_blank">alisonkisk</a>   <span class="timeago" data-date="2021-08-19 16:17:30 &#43;0000 UTC">2021-08-19 16:17:30 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            It only breaks programs that do nothing forever, which is not useful
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=cjfd" target="_blank">cjfd</a>   <span class="timeago" data-date="2021-08-19 13:39:16 &#43;0000 UTC">2021-08-19 13:39:16 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Is it actually true that endless loops are undefined behavior? This statement does not make sense at face value. I am aware that sometimes UB is used to throw away code, but is an endless loop really UB? Anyway, compiling while(true); in g++ with -O4 just yields a program that runs forerver....
        </div>
        <div class="children">
            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=detaro" target="_blank">detaro</a>   <span class="timeago" data-date="2021-08-19 13:46:21 &#43;0000 UTC">2021-08-19 13:46:21 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Compilers choose to not remove it in this case, probably because there is no clean way of making assumptions that provide a way out, unlike in the example from the link, but the core point is as I mentioned &quot;making progress&quot;, specificall&lt; the Progress guarantee (<a href="https:&#x2F;&#x2F;en.cppreference.com&#x2F;w&#x2F;cpp&#x2F;language&#x2F;memory_model#Progress_guarantee" rel="nofollow">https:&#x2F;&#x2F;en.cppreference.com&#x2F;w&#x2F;cpp&#x2F;language&#x2F;memory_model#Prog...</a>)<p><i>In a valid C++ program, every thread eventually does one of the following:<p>* terminate<p>* makes a call to an I&#x2F;O library function<p>* performs an access through a volatile glvalue<p>* performs an atomic operation or a synchronization operation</i><p>It&#x27;s fairly obvious how a loop that has none of these side-effects is thus a target to get turned into one that&#x27;s guaranteed to terminate.
        </div>
        <div class="children">
            
        </div>
    </div>


            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=gizmo686" target="_blank">gizmo686</a>   <span class="timeago" data-date="2021-08-19 13:46:41 &#43;0000 UTC">2021-08-19 13:46:41 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            An infinite loop without any side effects.
        </div>
        <div class="children">
            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=shusaku" target="_blank">shusaku</a>   <span class="timeago" data-date="2021-08-19 14:05:28 &#43;0000 UTC">2021-08-19 14:05:28 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Optimize our an infinite loop for infinite speed up!
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


        
            


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=folli" target="_blank">folli</a>   <span class="timeago" data-date="2021-08-19 13:34:22 &#43;0000 UTC">2021-08-19 13:34:22 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Okay, can somebody explain?
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=davikrr" target="_blank">davikrr</a>   <span class="timeago" data-date="2021-08-19 13:34:43 &#43;0000 UTC">2021-08-19 13:34:43 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            &quot;LLVM considers infinite recursion to be UB, so the only valid way for this function to execute is to return true&quot;
        </div>
        <div class="children">
            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=jasode" target="_blank">jasode</a>   <span class="timeago" data-date="2021-08-19 14:06:17 &#43;0000 UTC">2021-08-19 14:06:17 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            <i>&gt;&quot;LLVM considers infinite recursion to be UB,</i><p>Not sure why he used the word &quot;recursion&quot; since collatz() is not calling itself.
        </div>
        <div class="children">
            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=forgetfulness" target="_blank">forgetfulness</a>   <span class="timeago" data-date="2021-08-19 15:23:04 &#43;0000 UTC">2021-08-19 15:23:04 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            It&#x27;s in the computability theory sense, since compilers and language specifications are symbolic math-heavy, and in math you model all these things as recursive functions, the terminology is applied uniformly.
        </div>
        <div class="children">
            
        </div>
    </div>


            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=tpush" target="_blank">tpush</a>   <span class="timeago" data-date="2021-08-19 14:29:41 &#43;0000 UTC">2021-08-19 14:29:41 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            He means the general concept of recursion, of which looping is an implementation, so to speak.
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=andrewaylett" target="_blank">andrewaylett</a>   <span class="timeago" data-date="2021-08-19 15:41:05 &#43;0000 UTC">2021-08-19 15:41:05 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Which isn&#x27;t quite right: the C++ spec allows the compiler to assume that a loop without side-effects will terminate.  And the only way the loop terminates will be by returning true.
        </div>
        <div class="children">
            
        </div>
    </div>


            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=tomhallett" target="_blank">tomhallett</a>   <span class="timeago" data-date="2021-08-19 15:14:00 &#43;0000 UTC">2021-08-19 15:14:00 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            How does LLVM decide this loop is unbounded?  Is any `while(true)` loop considered UB and therefore replaced with `return true` or is there more advanced introspection of the ast (some limited set of the halting problem)?
        </div>
        <div class="children">
            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=detaro" target="_blank">detaro</a>   <span class="timeago" data-date="2021-08-19 16:15:32 &#43;0000 UTC">2021-08-19 16:15:32 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            It checks how the loop can be exited, assumes that the loop must exit and thus take the code path that exits it, and then applies optimizations to remove everything it doesn&#x27;t need to find the result.
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


            
                


    
    <div class="comment hasChildren">
        <p><a href="https://news.ycombinator.com/user?id=Winsaucerer" target="_blank">Winsaucerer</a>   <span class="timeago" data-date="2021-08-19 13:50:50 &#43;0000 UTC">2021-08-19 13:50:50 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            What does &#x27;UB&#x27; stand for?
        </div>
        <div class="children">
            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=loeg" target="_blank">loeg</a>   <span class="timeago" data-date="2021-08-19 13:56:50 &#43;0000 UTC">2021-08-19 13:56:50 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Undefined Behavior.
        </div>
        <div class="children">
            
        </div>
    </div>


            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=the_only_law" target="_blank">the_only_law</a>   <span class="timeago" data-date="2021-08-19 13:51:27 &#43;0000 UTC">2021-08-19 13:51:27 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            Undefined Behavior
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


            
        </div>
    </div>


            
                


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=GuB-42" target="_blank">GuB-42</a>   <span class="timeago" data-date="2021-08-19 15:38:19 &#43;0000 UTC">2021-08-19 15:38:19 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            The Collatz conjecture is saying that the programmed algorithm will eventually terminate and return true. Here the compiler optimized the code to always return true. Therefore the author jokingly assumed that the compiler must have proven the Collatz conjecture and the authors should be rewarded a million dollars.<p>In reality, the reason is that out of the two outcomes: true or infinite loop, the infinite loop violates the standard, and therefore, the result must be true. Another way to see it is that the only way for the code to be valid is if the programmer knows that the Collatz conjecture is true, and the compiler trusts the programmer, saying that the compiler knows the answer to the Collatz conjecture is a kind of circular reasoning.<p>There are other issues here: the numbers are bounded (a 128 bits integer), but the conjecture is not. And no million dollar prize have been assigned to this problem (it is not one of the millenium problems). Also, an infinite loop is not a result, it is actually the textbook example of an undecidable problem.
        </div>
        <div class="children">
            
        </div>
    </div>


            
        </div>
    </div>


        
            


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=abetusk" target="_blank">abetusk</a>   <span class="timeago" data-date="2021-08-19 13:57:31 &#43;0000 UTC">2021-08-19 13:57:31 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            <p><pre><code>   unsigned __int128</code></pre>
        </div>
        <div class="children">
            
        </div>
    </div>


        
            


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=nickcw" target="_blank">nickcw</a>   <span class="timeago" data-date="2021-08-19 14:56:52 &#43;0000 UTC">2021-08-19 14:56:52 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            C++ doing infinite loops in zero time!
        </div>
        <div class="children">
            
        </div>
    </div>


        
            


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=" target="_blank"></a>   <span class="timeago" data-date="2021-08-19 14:23:06 &#43;0000 UTC">2021-08-19 14:23:06 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            
        </div>
        <div class="children">
            
        </div>
    </div>


        
            


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=" target="_blank"></a>   <span class="timeago" data-date="2021-08-19 13:34:22 &#43;0000 UTC">2021-08-19 13:34:22 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            
        </div>
        <div class="children">
            
        </div>
    </div>


        
            


    
    <div class="comment ">
        <p><a href="https://news.ycombinator.com/user?id=" target="_blank"></a>   <span class="timeago" data-date="2021-08-19 13:45:23 &#43;0000 UTC">2021-08-19 13:45:23 &#43;0000 UTC</span> [ - ]</p>
        <div class="body">
            
        </div>
        <div class="children">
            
        </div>
    </div>


        
    
</article>

    </main>
    <footer>
        <span class="h-logo">&copy; Hugo Hacker News</span><br/>
        Site created By <a href="https://davidejones.com" target="_blank">David E Jones</a> Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> and the <a href="https://github.com/HackerNews/API" target="_blank">Hacker News api</a>.
        <ul>
            
                <li><a href="/hugo-hn/guidelines/">Guidelines</a></li>
            
                <li><a href="/hugo-hn/faq/">FAQ</a></li>
            
                <li><a href="mailto:hn@ycombinator.com">Support</a></li>
            
                <li><a href="https://github.com/HackerNews/API">API</a></li>
            
                <li><a href="/hugo-hn/security/">Security</a></li>
            
                <li><a href="/hugo-hn/lists/">Lists</a></li>
            
                <li><a href="https://news.ycombinator.com/bookmarklet.html">Bookmarklet</a></li>
            
                <li><a href="/hugo-hn/dmca/">DMCA</a></li>
            
                <li><a href="http://www.ycombinator.com/apply/">Apply to YC</a></li>
            
                <li><a href="mailto:hn@ycombinator.com">Contact</a></li>
            
        </ul>
    </footer>

    
    
    
    
    
    
    <script type="text/javascript" src="https://davidejones.github.io/hugo-hn/main.01d140732eee0e8adfdb7a7f714755097c6676bfb8e8bf27645ce342b2ed12a481b08f6838c413c20bff3acf20f6159b3336339a220ff5ec5e45eb7877106361.js"  integrity="sha512-AdFAcy7uDorf23p/cUdVCXxmdr&#43;46L8nZFzjQrLtEqSBsI9oOMQTwgv/Os8g9hWbMzYzmiIP9exeRet4dxBjYQ=="  crossorigin="anonymous" defer></script>
</body>
</html>

